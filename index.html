<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>100 Blocks a Day</title>
    <link rel="icon" href="favicon.ico" type="image/x-icon" />
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }

        .container {
            text-align: center;
            width: 100%;
            position: absolute;
            top: 0;
        }

        h1 {
            font-size: 2em;
        }

        h1, p {
            margin: 10px;
        }

        #links {
            width: min(80vh,80vw);
            margin: auto;
            display: inline-block;
        }

        a {
            text-decoration: none;
        }

        a:hover {
            text-decoration:underline;
        }

        #wbw {
            float: left;
        }
        #gh {
            float: right;
        }

        #grid-container {
            height: min(80vh,80vw);
            width: min(80vh,80vw);
            margin: auto;
        }

        .grid-row {
            display: flex;
        }

        .grid-cell {
            width: calc(10% - 2px);
            height: 0;
            padding-bottom: calc(10% - 2px);
            border: 1px solid #ccc;
            margin: 1px;
        }

        #toggleButton {
            margin-top: 30px;
            padding: 5px 20px;
            font-size: 16px;
        }

    </style>
</head>
<body>
    <div class="container">
        <h1>100 Blocks a Day</h1>
        <span id="links"><a id="wbw" href="https://waitbutwhy.com/2016/10/100-blocks-day.html" target="_blank">What is this?</a><a id="gh" href="https://github.com/jamesdeluk/100-blocks-a-day" target="_blank">View on GitHub <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.01 8.01 0 0 0 16 8c0-4.42-3.58-8-8-8"/></svg></a></span>
        <div id="grid-container"></div>
        <button id="toggleButton">Toggle Colours</button>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const gridContainer = document.getElementById('grid-container');
            const toggleButton = document.getElementById('toggleButton');
            const colours1 = [[0,255,0],[0,225,45],[0,195,75],[0,165,105],[0,135,135],[0,105,165],[0,75,195],[0,45,225],[0,0,255],[45,0,225],[75,0,195],[105,0,165],[135,0,135],[165,0,105],[195,0,75],[225,0,45],[255,0,0]];
            const colours2 = [[160,255,56],[90,255,56],[56,255,92],[56,255,163],[56,255,233],[56,207,255],[56,137,255],[56,66,255],[116,56,255],[186,56,255],[255,56,254],[255,56,183],[255,56,113],[255,69,56],[255,139,56],[255,209,56],[230,255,56]];
            const rampColours1 = ['#FFFFFF','#CDCDCD','#9B9B9B','#696969','#373737','#050505'];
            let currentColoursIndex = 0;
            const coloursArray = [colours1, colours2, rampColours1];
            let colours = coloursArray[currentColoursIndex];
            let repeat = true;
            const blockSize = 6; // Number of cells per colour block

            function calculateElapsedMinutes() {
                const now = new Date();
                const hours = now.getHours();
                const minutes = now.getMinutes();
                const elapsedMinutes = (hours - 6) * 60 + minutes;
                console.log(elapsedMinutes);
                return elapsedMinutes;
            }

            function getColourForCell(index) {
                if (colours.length != 6) {
                    const colourIndex = Math.floor(index / blockSize) % colours.length;
                    const [r,g,b] = colours[colourIndex];
                    return `rgb(${r},${g},${b})`;
                } else {
                    const colourIndex = index % blockSize;
                    return colours[colourIndex];
                }
            }

            function updateGrid() {
                const elapsedMinutes = calculateElapsedMinutes();
                const totalCells = 100;
                const filledCells = Math.min(Math.floor(elapsedMinutes / 10), totalCells);

                gridContainer.innerHTML = ''; // Clear previous grid

                for (let i = 0; i < 10; i++) {
                    const row = document.createElement('div');
                    row.classList.add('grid-row');
                    for (let j = 0; j < 10; j++) {
                        const cell = document.createElement('div');
                        cell.classList.add('grid-cell');
                        const cellIndex = i * 10 + j;
                        if (cellIndex < filledCells) {
                            const colour = getColourForCell(cellIndex);
                            cell.style.backgroundColor = colour;
                        }
                        row.appendChild(cell);
                    }
                    gridContainer.appendChild(row);
                }
            }

            toggleButton.addEventListener('click', function() {
                currentColoursIndex = (currentColoursIndex + 1) % coloursArray.length;
                colours = coloursArray[currentColoursIndex];
                updateGrid();
            });

            setInterval(updateGrid, 60000);

            updateGrid();
        });
    </script>
</body>
</html>
